(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const l of c.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function i(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(o){if(o.ep)return;o.ep=!0;const c=i(o);fetch(o.href,c)}})();function J(t){return t*t}function A(t,e){return J(t.x-e.x)+J(t.y-e.y)}function U(t,e,i){var r=A(e,i);if(r==0)return A(t,e);var o=((t.x-e.x)*(i.x-e.x)+(t.y-e.y)*(i.y-e.y))/r;return o=Math.max(0,Math.min(1,o)),A(t,{x:e.x+o*(i.x-e.x),y:e.y+o*(i.y-e.y)})}function Z(t,e,i){return Math.sqrt(U(t,e,i))}let w=[],M=!1;const C=document.getElementById("fill"),T=document.getElementById("stroke"),Y=document.getElementById("points"),X=document.getElementById("cursor"),v=document.getElementById("uicanvas"),b=C.getContext("2d"),E=T.getContext("2d"),f=Y.getContext("2d"),u=X.getContext("2d"),a=v.getContext("2d");let y,k,D=!1,m={x:0,y:0},s,x,d,h,n=1;function V(t){var e;s=t,x=_(),d=-x.minX+document.documentElement.clientWidth/2-(x.maxX-x.minX)/2,h=-x.minY+document.documentElement.clientHeight/2-(x.maxY-x.minY)/2,(e=window.visualViewport)==null||e.addEventListener("resize",te),window.addEventListener("contextmenu",i=>i.preventDefault()),window.addEventListener("keyup",oe),window.addEventListener("wheel",se),v.addEventListener("mousedown",ne),v.addEventListener("mouseup",ie),v.addEventListener("mousemove",ce),G(),P()}function G(){C.height=document.documentElement.clientHeight,C.width=document.documentElement.clientWidth,T.height=document.documentElement.clientHeight,T.width=document.documentElement.clientWidth,Y.height=document.documentElement.clientHeight,Y.width=document.documentElement.clientWidth,X.height=document.documentElement.clientHeight,X.width=document.documentElement.clientWidth,v.height=document.documentElement.clientHeight,v.width=document.documentElement.clientWidth}function _(){const t=Math.min(...Object.keys(s.vertices).map(o=>s.vertices[o].coordinates[0])),e=Math.min(...Object.keys(s.vertices).map(o=>s.vertices[o].coordinates[1])),i=Math.max(...Object.keys(s.vertices).map(o=>s.vertices[o].coordinates[0])),r=Math.max(...Object.keys(s.vertices).map(o=>s.vertices[o].coordinates[1]));return{minX:t,minY:e,maxX:i,maxY:r}}function W(t){typeof t=="string"&&(t=s.vertices[t]);const e=[];for(let i of t.shapes)for(let r of s.shapes[parseInt(i)].vertices){if(s.vertices[r]===t)continue;const o=[t,s.vertices[r]];e.find(c=>c[0]===o[0]&&c[1]===o[1]||c[0]===o[1]&&c[1]===o[0])||e.push(o)}return e}function B(t){return typeof t=="string"&&(t=s.vertices[t]),w.filter(i=>i[0]===t||i[1]===t)}function I(t){return w.find(e=>e[0]===t[0]&&e[1]===t[1]||e[0]===t[1]&&e[1]===t[0])}function H(t){const e=W(t).length-B(t).length;return e<4?14:e<7?18:22}function j(){if(E.clearRect(0,0,T.width,T.height),!M)for(const t of w)E.strokeStyle="black",E.lineWidth=1,E.beginPath(),E.moveTo(n*t[0].coordinates[0]+d,n*t[0].coordinates[1]+h),E.lineTo(n*t[1].coordinates[0]+d,n*t[1].coordinates[1]+h),E.closePath(),E.stroke()}function $(){b.clearRect(0,0,C.width,C.height);let t=!0;for(const e of s.shapes)I([s.vertices[e.vertices[0]],s.vertices[e.vertices[1]]])&&I([s.vertices[e.vertices[1]],s.vertices[e.vertices[2]]])&&I([s.vertices[e.vertices[2]],s.vertices[e.vertices[0]]])||M?e.completed=!0:(t=!1,e.completed=!1),e.isPreDrawn&&(w.push([s.vertices[e.vertices[0]],s.vertices[e.vertices[1]]]),w.push([s.vertices[e.vertices[1]],s.vertices[e.vertices[2]]]),w.push([s.vertices[e.vertices[2]],s.vertices[e.vertices[0]]]),e.completed=!0,e.isPreDrawn=!1,j(),S()),e.completed&&(b.fillStyle=s.palette[parseInt(e.color)],b.beginPath(),b.moveTo(n*s.vertices[e.vertices[0]].coordinates[0]+d,n*s.vertices[e.vertices[0]].coordinates[1]+h),b.lineTo(n*s.vertices[e.vertices[1]].coordinates[0]+d,n*s.vertices[e.vertices[1]].coordinates[1]+h),b.lineTo(n*s.vertices[e.vertices[2]].coordinates[0]+d,n*s.vertices[e.vertices[2]].coordinates[1]+h),b.closePath(),b.fill());t&&(M=!0,j(),S(),L(),Q())}function S(){if(f.clearRect(0,0,Y.width,Y.height),!M)for(const t in s.vertices){const e=s.vertices[t],i=W(t).length-B(t).length;if(i===0&&!e.shapes.find(o=>!s.shapes[parseInt(o)].completed))continue;const r=H(t);f.strokeStyle=e.selected===2?"#e7ad34":"black",f.lineWidth=1,f.setLineDash([1,1]),f.beginPath(),f.arc(n*e.coordinates[0]+d,n*e.coordinates[1]+h,1.5*r,0,2*Math.PI),f.closePath(),e.selected&&(f.fillStyle=e.selected===2?"#e7ad3433":"rgba(0, 0, 0, 0.2)",f.fill()),f.stroke(),f.fillStyle=e.selected===2?"#e7ad34":e.selected===1?"black":"white",f.lineWidth=1,f.setLineDash([]),f.beginPath(),f.arc(n*e.coordinates[0]+d,n*e.coordinates[1]+h,r,0,2*Math.PI),f.closePath(),f.fill(),f.stroke(),f.font="15px Arial",f.textAlign="center",f.textBaseline="middle",f.fillStyle=e.selected===1?"white":"black",f.fillText(i.toString(),n*e.coordinates[0]+d,n*e.coordinates[1]+h)}}function L(){u.clearRect(0,0,X.width,X.height),!M&&y&&D&&(y.selected===2?(u.strokeStyle="#e7ad34",u.fillStyle="#e7ad34"):(u.strokeStyle="black",u.fillStyle="black"),u.lineWidth=4,u.setLineDash([4,8]),u.beginPath(),u.moveTo(n*y.coordinates[0]+d,n*y.coordinates[1]+h),u.lineTo(m.x,m.y),u.closePath(),u.stroke(),u.moveTo(m.x,m.y),u.arc(m.x,m.y,4,0,2*Math.PI),u.fill(),u.lineWidth=1,u.setLineDash([1,1]),u.beginPath(),u.arc(m.x,m.y,28,0,2*Math.PI),u.closePath(),u.stroke())}function Q(){a.clearRect(0,0,v.width,v.height),a.fillStyle="white",a.strokeStyle="black",a.lineWidth=2,a.beginPath(),a.moveTo(0,v.height-40),a.lineTo(v.width,v.height-40),a.closePath(),a.stroke(),a.beginPath(),a.moveTo(v.width/2,v.height-60),a.lineTo(v.width/2-20,v.height-20),a.lineTo(v.width/2+20,v.height-20),a.closePath(),a.fill(),a.stroke(),a.textAlign="left",a.textBaseline="middle",a.fillStyle="black",a.font="24px Arial",a.fillText(s.theme,50,100),a.font="16px Arial",a.fillText(new Date(s.date).toLocaleDateString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric"}),50,200),a.fillText(s.puzzleConstructor,50,250),a.font="14px Arial",a.textAlign="center",a.fillText(s.shapes.filter(t=>!t.isPreDrawn&&!t.completed).length.toString(),v.width/2,v.height-33)}function ee(t,e){console.log("stroke completed");const i=t.coordinates[0],r=t.coordinates[1],o=e.coordinates[0],c=e.coordinates[1];for(let p of w){const g=p[0].coordinates[0],z=p[0].coordinates[1],N=p[1].coordinates[0],R=p[1].coordinates[1],O=(R-z)*(o-i)-(N-g)*(c-r);if(O===0)continue;const q=((N-g)*(r-z)-(R-z)*(i-g))/O,K=((o-i)*(r-z)-(c-r)*(i-g))/O;if(q>0&&q<1&&K>0&&K<1)return console.log("crossing",t,e,p),!1}if(W(t).length-B(t).length<1||W(e).length-B(e).length<1)return console.log("not enough strokes"),!1;const l=[t,e];return I([t,e])?(console.log("stroke already exists"),!1):(w.push(l),P(),!0)}function te(){G(),P()}function oe(t){t.key==="Backspace"&&w.length>0&&(w.pop(),P())}function se(t){if(t.deltaY<0&&n<6){const e=(m.x-d)/n,i=(n+.2)*e+d,r=n*x.maxX+d,o=n*x.minX+d;d-=Math.max(Math.min(i,r),o)-m.x;const c=(m.y-h)/n,l=(n+.2)*c+h,p=n*x.maxY+h,g=n*x.minY+h;h-=Math.max(Math.min(l,p),g)-m.y,n+=.2}if(t.deltaY>0&&n>.4){const e=(m.x-d)/n,i=(n-.2)*e+d,r=n*x.maxX+d,o=n*x.minX+d;d-=Math.max(Math.min(i,r),o)-m.x;const c=(m.y-h)/n,l=(n-.2)*c+h,p=n*x.maxY+h,g=n*x.minY+h;h-=Math.max(Math.min(l,p),g)-m.y,n-=.2}P()}function ne(t){if(t.button===2){let c=1/0,l;for(const p of w){let g=Z({x:(t.clientX-d)/n,y:(t.clientY-h)/n},{x:p[0].coordinates[0],y:p[0].coordinates[1]},{x:p[1].coordinates[0],y:p[1].coordinates[1]});g<c&&(c=g,l=p)}if(l&&c<5){let p=w.indexOf(I(l));w.splice(p,1),P()}return}D=!0;const e=(t.clientX-d)/n,i=(t.clientY-h)/n;let r=1/0,o="";for(const c in s.vertices){const l=s.vertices[c];(l.coordinates[0]-e)**2+(l.coordinates[1]-i)**2<r&&(r=(l.coordinates[0]-e)**2+(l.coordinates[1]-i)**2,o=c)}o&&r<(2*H(o)/n)**2&&(y=s.vertices[o],y.selected=1,S()),L()}function ie(t){D=!1,y&&y.selected&&k&&k.selected&&ee(y,k),y&&(y.selected=0),y=null,k&&(k.selected=0),k=null,L(),S()}function ce(t){if(m.x=t.clientX,m.y=t.clientY,y){const e=(m.x-d)/n,i=(m.y-h)/n;let r=1/0,o="";for(const c in s.vertices){const l=s.vertices[c];l!==y&&(l.coordinates[0]-e)**2+(l.coordinates[1]-i)**2<r&&(r=(l.coordinates[0]-e)**2+(l.coordinates[1]-i)**2,o=c)}o&&r<((1.5*H(o)+28)/n)**2?(k&&k!==s.vertices[o]&&(k.selected=0),k=s.vertices[o],k.selected=2,y.selected=2,S()):(y.selected!==1||k)&&(y.selected=1,k&&(k.selected=0),S())}else D&&(d+=t.movementX,h+=t.movementY,P());L()}function P(){j(),S(),$(),L(),Q()}async function re(){const t=document.getElementById("select");(await(await fetch("https://api.github.com/repos/Q726kbXuN/vertex/git/trees/master?recursive=1")).json()).tree.filter(c=>c.path.startsWith("data/")).reverse().forEach(c=>{const l=c.path.split("/")[3];if(l){const p=parseInt(l.split("-")[0]),g=document.createElement("option");g.value=c.url,g.innerText=l.split(".")[0],t.children[2*(2024-p)+2].append(g)}});const o=document.createElement("option");o.value="hello:)",o.innerText="????-??-??",t.children[12].append(o)}var F;(F=document.getElementById("selectpuzzle"))==null||F.addEventListener("click",async()=>{const t=document.getElementById("select").value;if(t&&t==="hello:)")document.getElementById("overlay").style.display="none",V(JSON.parse('{"date":"2023-12-28","displayDate":"","id":"0","puzzleConstructor":"me :)","theme":"<3","palette":["#ff2a2a","#ff5555","#f0b6d3","#dd5498","#b42b6f","#ea95bf","#e374ab","#d63384","#aa0000","#ff8080","#d40000","#ffaaaa","#ff0000"],"shapes":[{"color":"0","vertices":[0,1,2]},{"color":"1","vertices":[0,3,2]},{"color":"2","vertices":[4,5,6]},{"color":"3","vertices":[6,7,4]},{"color":"4","vertices":[8,9,10]},{"color":"5","vertices":[10,11,9]},{"color":"2","vertices":[7,11,10]},{"color":"6","vertices":[7,12,6]},{"color":"2","vertices":[11,12,7]},{"color":"5","vertices":[6,13,12]},{"color":"4","vertices":[13,14,6]},{"color":"5","vertices":[8,15,16]},{"color":"3","vertices":[15,17,18]},{"color":"6","vertices":[18,16,15]},{"color":"2","vertices":[17,19,18]},{"color":"5","vertices":[19,4,18]},{"color":"7","vertices":[14,20,6]},{"color":"5","vertices":[20,5,6]},{"color":"3","vertices":[14,21,20]},{"color":"6","vertices":[21,22,20]},{"color":"3","vertices":[20,22,5]},{"color":"2","vertices":[21,23,22]},{"color":"5","vertices":[23,5,22]},{"color":"3","vertices":[16,10,8]},{"color":"7","vertices":[16,24,7]},{"color":"5","vertices":[18,24,16]},{"color":"3","vertices":[4,24,18]},{"color":"6","vertices":[4,7,24]},{"color":"6","vertices":[16,10,7]},{"color":"1","vertices":[25,26,27]},{"color":"0","vertices":[25,28,27]},{"color":"8","vertices":[26,29,27]},{"color":"9","vertices":[27,30,29]},{"color":"10","vertices":[27,31,32]},{"color":"0","vertices":[31,33,32]},{"color":"0","vertices":[32,30,27]},{"color":"1","vertices":[30,34,32]},{"color":"11","vertices":[34,33,32]},{"color":"11","vertices":[35,36,33]},{"color":"12","vertices":[34,36,33]},{"color":"8","vertices":[33,37,35]},{"color":"10","vertices":[37,38,35]},{"color":"9","vertices":[38,39,37]}],"vertices":{"0":{"coordinates":[318,193],"shapes":["0","1"]},"1":{"coordinates":[318,475],"shapes":["0"]},"2":{"coordinates":[358,482],"shapes":["0","1"]},"3":{"coordinates":[358,193],"shapes":["1"]},"4":{"coordinates":[567,236],"shapes":["2","3","15","26","27"]},"5":{"coordinates":[635,190],"shapes":["2","17","20","22"]},"6":{"coordinates":[676,330],"shapes":["2","3","7","9","10","16","17"]},"7":{"coordinates":[600,360],"shapes":["3","6","7","8","24","27","28"]},"8":{"coordinates":[396,346],"shapes":["4","11","23"]},"9":{"coordinates":[473,442],"shapes":["4","5"]},"10":{"coordinates":[508,363],"shapes":["4","5","5","6","23","28"]},"11":{"coordinates":[566,505],"shapes":["5","6","8"]},"12":{"coordinates":[677,424],"shapes":["7","8","9"]},"13":{"coordinates":[739,337],"shapes":["9","10"]},"14":{"coordinates":[747,275],"shapes":["10","16","18"]},"15":{"coordinates":[393,249],"shapes":["11","12","13"]},"16":{"coordinates":[504,325],"shapes":["11","13","23","24","25","28"]},"17":{"coordinates":[449,194],"shapes":["12","14"]},"18":{"coordinates":[495,264],"shapes":["12","13","14","15","25","26"]},"19":{"coordinates":[523,199],"shapes":["14","15"]},"20":{"coordinates":[691,243],"shapes":["16","17","18","19","20"]},"21":{"coordinates":[722,219],"shapes":["18","19","21"]},"22":{"coordinates":[672,207],"shapes":["19","20","21","22"]},"23":{"coordinates":[679,192],"shapes":["21","22"]},"24":{"coordinates":[548,276],"shapes":["24","25","26","27"]},"25":{"coordinates":[778,189],"shapes":["29","30"]},"26":{"coordinates":[785,398],"shapes":["29","31"]},"27":{"coordinates":[857,376],"shapes":["29","30","31","32","33","35"]},"28":{"coordinates":[858,189],"shapes":["30"]},"29":{"coordinates":[833,482],"shapes":["31","32"]},"30":{"coordinates":[908,494],"shapes":["32","35","36"]},"31":{"coordinates":[899,387],"shapes":["33","34"]},"32":{"coordinates":[945,441],"shapes":["33","34","35","36","37"]},"33":{"coordinates":[934,381],"shapes":["34","37","38","39","40"]},"34":{"coordinates":[976,484],"shapes":["36","37","39"]},"35":{"coordinates":[1003,344],"shapes":["38","40","41"]},"36":{"coordinates":[1002,399],"shapes":["38","39"]},"37":{"coordinates":[938,257],"shapes":["40","41","42"]},"38":{"coordinates":[1001,190],"shapes":["41","42"]},"39":{"coordinates":[937,188],"shapes":["42"]}}}'));else if(t){document.getElementById("overlay").style.display="none";let i=await(await fetch(t)).json();V(JSON.parse(atob(i.content)))}});re();
